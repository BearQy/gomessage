(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b923e88","chunk-1f1bd5cd"],{"2e6a":function(e,t,a){},"31ce":function(e,t,a){"use strict";a("5db9")},3666:function(e,t,a){"use strict";a("e0ae")},"3fce":function(e,t,a){"use strict";a("d363")},"5db9":function(e,t,a){},"7d3c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"always"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"padding-left":"100px"}},[e._v("劫持【 "),a("span",{staticStyle:{"font-size":"30px",color:"#3de1ad","font-weight":"900"}},[e._v(e._s(e.getStoreNamespace))]),e._v(" 】通道内 · 实时过境数据")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-left":"10px"},attrs:{type:"text"},on:{click:function(t){return e.getServerData()}}},[e._v(" 劫持数据 ")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.copyCode()}}},[e._v("一键复制")])],1),a("div",[a("pre",{attrs:{id:"CodeStyle"}},[a("code",{attrs:{id:"CodeContent"}},[e._v(e._s(e.codeJsonContent))])])])])},s=[],l=(a("e9c4"),a("6cac")),o={name:"cCodeFormat",data:function(){return{codeJsonContent:"点击 <劫持数据> 可以看到推送进GoMessage的原始数据...\n\n每次 <劫持数据> 都可以实时抓取到最新的一条数据...\n\n此处对数据进行了格式化与对齐，您可以把数据 <一键复制> 到其它地方使用...",codeUpdateTime:null,arr2:[]}},computed:{getStoreNamespace:function(){return this.$store.getters.getNamespace}},methods:{copyCode:function(){var e=document.getElementById("CodeContent");window.getSelection().selectAllChildren(e),document.execCommand("Copy"),this.$message("复制成功...")},getServerData:function(){var e=this;Object(l["o"])(this.$store.getters.getNamespace,null).then((function(t){var a=t.data.result["request_json"],n=t.data.result["request_time"];null===a||0===a.length?e.$message({showClose:!1,message:"没有数据进入GoMessage服务，无法向您展示数据。"}):(e.codeJsonContent=JSON.stringify(a,null,2),e.codeUpdateTime=e.dateFormat(new Date(n)))})).catch((function(e){console.log(e)}))}}},i=o,r=(a("3fce"),a("2877")),c=Object(r["a"])(i,n,s,!1,null,"1746bd56",null);t["default"]=c.exports},"9e7e":function(e,t,a){"use strict";a("2e6a")},d363:function(e,t,a){},e0ae:function(e,t,a){},f744:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{staticStyle:{height:"60px","background-color":"#cccccc"}},[a("el-switch",{staticStyle:{height:"100%"},attrs:{"inactive-text":"基础转发模式","active-text":"高级渲染模式",width:40},on:{change:e.updateNamespaceRenders},model:{value:e.thisRenders,callback:function(t){e.thisRenders=t},expression:"thisRenders"}})],1)],1),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogVisible,expression:"dialogVisible"}],staticStyle:{padding:"20px 0","margin-left":"0","margin-right":"0"},attrs:{gutter:20,"element-loading-text":'每个通道都可以独立开启【高级渲染模式】把过境数据"渲染为人类可读"的信息.... 若不开启此模式则当前通道只会将数据"原封不动"的送达至目标客户端。',"element-loading-spinner":"el-icon-info","element-loading-background":"rgba(0, 0, 0, 0.95)"}},[a("el-col",{attrs:{span:12}},[a("DataFormat",{staticClass:"shadow"}),a("br"),a("DataMap",{staticClass:"shadow"})],1),a("el-col",{attrs:{span:12}},[a("CTemplate",{staticClass:"shadow"})],1)],1)],1)},s=[],l=a("7d3c"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"padding-left":"50px"}},[e._v("自定义变量映射")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.post_data}},[e._v("保存变量")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{border:!0,data:e.configList}},[a("el-table-column",{attrs:{label:"Key（自定义变量名）",prop:"key"}}),a("el-table-column",{attrs:{label:"Value（原始数据中的索引）",prop:"value"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.configList)}}},[e._v("移除 ")])]}}])})],1),a("br"),a("el-form",{ref:"newMap",attrs:{model:e.newMap,rules:e.newMapRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"DataMapGridContent"},[a("el-form-item",{attrs:{prop:"mapKey"}},[a("el-input",{attrs:{placeholder:"纯字符串，不能有符号"},model:{value:e.newMap.mapKey,callback:function(t){e.$set(e.newMap,"mapKey",t)},expression:"newMap.mapKey"}},[a("template",{slot:"prepend"},[e._v("Key:")])],2)],1)],1)]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"DataMapGridContent"},[a("el-form-item",{attrs:{prop:"mapValue"}},[a("el-input",{attrs:{placeholder:"Json索引路径"},model:{value:e.newMap.mapValue,callback:function(t){e.$set(e.newMap,"mapValue",t)},expression:"newMap.mapValue"}},[a("template",{slot:"prepend"},[e._v("Value:")])],2)],1)],1)])],1)],1),a("br"),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addTableData}},[e._v("新增变量")])],1)},i=[],r=(a("a434"),a("ac1f"),a("1276"),a("d3b7"),a("159b"),a("6cac")),c=a("61f7"),p={name:"cConfigMap",data:function(){return{newMap:{mapKey:"",mapValue:""},newMapRules:{mapKey:[{required:!0,message:"不能为空",trigger:"blur"},{validator:c["b"],trigger:"blur"},{validator:c["c"],trigger:"blur"}],mapValue:[{required:!0,message:"不能为空",trigger:"blur"},{validator:c["b"],trigger:"blur"}]},configList:[{key:"{{ .N1 }} ",value:"alerts.#.labels.alertname"},{key:"{{ .N2 }}",value:"alerts.#.labels.severity"},{key:"{{ .N3 }}",value:"alerts.#.labels.hostname"},{key:"{{ .N4 }}",value:"alerts.#.labels.ping"},{key:"{{ .N5 }}",value:"alerts.#.annotations.description"},{key:"{{ .N6 }}",value:"status"},{key:"{{ .N7 }}",value:"alerts.#.startsAt"},{key:"{{ .N8 }}",value:"alerts.#.endsAt"}]}},computed:{},methods:{addTableData:function(){var e=this;this.$refs["newMap"].validate((function(t){if(t){var a=e.newMap.mapKey,n=e.newMap.mapValue;if(0===a.length||0===n.length)e.$message.error("输入框不能为空...");else{var s={key:"{{ ."+a+" }}",value:n};e.configList.push(s),e.newMap.mapKey="",e.newMap.mapValue="",e.$message.success("添加成功..."),e.post_data()}}}))},deleteRow:function(e,t){t.splice(e,1),this.post_data()},post_data:function(){for(var e=this,t=[],a=0;a<this.configList.length;a++){var n=this.configList[a].key,s=n.split(" ")[1].split(".")[1],l=this.configList[a].value,o={};o[s]=l,t.push(o)}Object(r["l"])(this.$store.getters.getNamespace,{key_value_list:t}).then((function(t){console.log(t.data),e.$message.success("数据库更新成功...")})).catch((function(e){console.log(e)}))},pullMapData:function(){var e=this;Object(r["p"])(this.$store.getters.getNamespace,null).then((function(t){var a=[];0===t.data.result.length?console.log("数据库里没有数据"):(t.data.result.forEach((function(e){var t={key:"{{ ."+e["key"]+" }}",value:e["value"]};a.push(t)})),e.configList=a)})).catch((function(e){console.log(e)}))}},created:function(){this.pullMapData()}},u=p,d=(a("31ce"),a("2877")),m=Object(d["a"])(u,o,i,!1,null,"617cddff",null),g=m.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-switch",{staticStyle:{float:"left",padding:"3px 0"},attrs:{"inactive-text":"聚合发送"},on:{change:e.pushTemplateData},model:{value:e.template.template_is_merge,callback:function(t){e.$set(e.template,"template_is_merge",t)},expression:"template.template_is_merge"}}),a("el-tooltip",{staticClass:"item",staticStyle:{float:"left","margin-left":"30px","padding-top":"3px"},attrs:{content:'跳转到新页面：查看"消息模板"编写教程',effect:"dark",placement:"bottom"}},[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:e.newTagPage}},[a("span",[a("i",{staticClass:"el-icon-info"})])])],1),a("span",{staticStyle:{"margin-right":"70px"}},[e._v("消息渲染模板")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){return e.pushTemplateData()}}},[e._v("保存模板")])],1),a("div",[a("el-input",{attrs:{autosize:{minRows:10,maxRows:200},placeholder:"请输入Golang语法的模板内容",resize:"none",type:"textarea"},model:{value:e.template.template_content,callback:function(t){e.$set(e.template,"template_content",t)},expression:"template.template_content"}})],1)])},h=[],v={name:"cTemplate",data:function(){return{template:{template_is_merge:!1,template_content:"{{ if eq .N6 \"firing\" }}\n\n## <font color='#FF0000'>【报警中】服务器{{ .N3 }}</font>\n\n{{ else if eq .N6 \"resolved\" }}\n\n## <font color='#20B2AA'>【已恢复】服务器{{ .N3 }}</font>\n\n{{ else }}\n\n## 标题：信息通知\n\n{{ end }}\n\n====================\n\n**告警规则**：{{ .N1 }}\n\n**告警级别**：{{ .N2 }}\n\n**主机名称**：{{ .N3 }} \n\n**主机地址**：{{ .N4 }}\n\n**告警详情**：{{ .N5 }}\n\n**告警状态**：{{ .N6 }}\n\n**触发时间**：{{ .N7 }}\n\n**发送时间**：{{ .N8 }}\n\n**规则详情**：[Prometheus控制台](https://www.baidu.com)\n\n**报警详情**：[Alertmanager控制台](https://www.baidu.com)\n"}}},components:{},methods:{newTagPage:function(){var e="https://github.com/gomessage/gomessage#gomessage";window.open(e)},pushTemplateData:function(){var e=this;Object(r["k"])(this.$store.getters.getNamespace,this.template).then((function(t){console.log(t.data.result),e.$message.success("数据库更新成功...")})).catch((function(e){console.log(e)}))},pullTemplateData:function(){var e=this;Object(r["g"])(this.$store.getters.getNamespace,null).then((function(t){var a=t.data.result[0]["template_content"],n=t.data.result[0]["template_is_merge"];void 0===a||null===a||""===a?console.log("数据库里没有数据"):(e.template.template_content=a,e.template.template_is_merge=n)})).catch((function(e){console.log(e)}))}},created:function(){this.$store.commit("updateStepsActive",2),this.pullTemplateData()}},b=v,w=(a("9e7e"),Object(d["a"])(b,f,h,!1,null,"07aee069",null)),y=w.exports,_={name:"ViewRequestData",data:function(){return{thisRenders:!1,dialogVisible:!0}},components:{DataFormat:l["default"],DataMap:g,CTemplate:y},computed:{getThisRenders:function(){return this.$store.getters.getNamespaceInfo["is_renders"]}},methods:{getNamespaceRenders:function(){var e=this,t=this.$store.getters.getNamespaceInfo;Object(r["f"])(t.id,null).then((function(t){e.thisRenders=t.data.result.is_renders,e.$store.commit("updateNamespaceInfo",t.data.result)}))},updateNamespaceRenders:function(){var e=this,t=this.$store.getters.getNamespaceInfo;t["is_renders"]=this.thisRenders,Object(r["n"])(t.id,t).then((function(t){e.thisRenders=t.data.result["is_renders"],e.$store.commit("updateNamespaceInfo",t.data.result)}))}},watch:{thisRenders:{immediate:!0,handler:function(e,t){console.log(e,t),this.dialogVisible=!e}}},created:function(){this.getNamespaceRenders(),this.$store.commit("updateStepsActive",1)}},x=_,N=(a("3666"),Object(d["a"])(x,n,s,!1,null,"1c4dbb91",null));t["default"]=N.exports}}]);
//# sourceMappingURL=chunk-0b923e88.6ba1ecb4.js.map